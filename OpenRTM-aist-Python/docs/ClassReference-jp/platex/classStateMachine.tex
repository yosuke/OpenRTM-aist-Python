\section{ƒNƒ‰ƒX State\-Machine}
\label{classStateMachine}\index{StateMachine@{StateMachine}}
ó‘Ôƒ\}ƒVƒ“ƒNƒ‰ƒX State\-Machine ƒNƒ‰ƒX‚Íó‘Ôƒ\}ƒVƒ“‚ğÀŒ»‚·‚éƒNƒ‰ƒX‚Å‚ ‚éB —á: Active\-Object‚Íó‘Ôƒ\}ƒVƒ“‚ğ‚ÂƒAƒNƒeƒBƒuƒIƒuƒWƒFƒNƒg‚Å‚ ‚é‚Æ‚·‚éB ó‘Ô‚Í3ó‘Ô INACTIVE, ACTIVE, ERROR ‚ ‚èAŠeó‘Ô‚Å‚ÌEntry‚âExit“®ì‚ğ ’è‹`‚µ‚½‚¢‚Æ‚·‚é‚ÆAˆÈ‰º‚Ì‚æ‚¤‚ÉÀŒ»‚³‚ê‚éB  


\subsection*{Public ƒƒ$\backslash$ƒbƒh}
\begin{CompactItemize}
\item 
{\bf \_\-\_\-init\_\-\_\-} (num\_\-of\_\-state)
\begin{CompactList}\small\item\em ƒRƒ“ƒXƒgƒ‰ƒNƒ^ \item\end{CompactList}\item 
{\bf set\-NOP} (call\_\-back)
\begin{CompactList}\small\item\em NOPŠÖ”‚ğ“o˜^‚·‚é. \item\end{CompactList}\item 
{\bf set\-Listener} (listener)
\begin{CompactList}\small\item\em {\bf Listener}{\rm (p.\,\pageref{namespaceListener})} ƒIƒuƒWƒFƒNƒg‚ğ“o˜^‚·‚é. \item\end{CompactList}\item 
{\bf set\-Entry\-Action} (state, call\_\-back)
\begin{CompactList}\small\item\em Entry action ŠÖ”‚ğ“o˜^‚·‚é. \item\end{CompactList}\item 
{\bf set\-Pre\-Do\-Action} (state, call\_\-back)
\begin{CompactList}\small\item\em Pre\-Do action ŠÖ”‚ğ“o˜^‚·‚é. \item\end{CompactList}\item 
{\bf set\-Do\-Action} (state, call\_\-back)
\begin{CompactList}\small\item\em Do action ŠÖ”‚ğ“o˜^‚·‚é. \item\end{CompactList}\item 
{\bf set\-Post\-Do\-Action} (state, call\_\-back)
\begin{CompactList}\small\item\em Post action ŠÖ”‚ğ“o˜^‚·‚é. \item\end{CompactList}\item 
{\bf set\-Exit\-Action} (state, call\_\-back)
\begin{CompactList}\small\item\em Exit action ŠÖ”‚ğ“o˜^‚·‚é. \item\end{CompactList}\item 
{\bf set\-Transition\-Action} (call\_\-back)
\begin{CompactList}\small\item\em State transition action ŠÖ”‚ğ“o˜^‚·‚é. \item\end{CompactList}\item 
{\bf set\-Start\-State} (states)
\begin{CompactList}\small\item\em ‰Šúó‘Ô‚ğƒZƒbƒg‚·‚é \item\end{CompactList}\item 
{\bf get\-States} ()
\begin{CompactList}\small\item\em ó‘Ô‚ğæ“¾‚·‚é \item\end{CompactList}\item 
{\bf get\-State} ()
\item 
{\bf is\-In} (state)
\begin{CompactList}\small\item\em Œ»İó‘Ô‚ğŠm”F \item\end{CompactList}\item 
{\bf go\-To} (state)
\begin{CompactList}\small\item\em ó‘Ô‚ğ•ÏX \item\end{CompactList}\item 
{\bf worker} ()
\begin{CompactList}\small\item\em ‹ì“®ŠÖ” \item\end{CompactList}\item 
{\bf set\-Null\-Func} (s, nullfunc)
\item 
{\bf sync} (states)
\item 
{\bf need\_\-trans} ()
\item 
{\bf update\_\-curr} (curr)
\end{CompactItemize}


\subsection{à–¾}
ó‘Ôƒ\}ƒVƒ“ƒNƒ‰ƒX State\-Machine ƒNƒ‰ƒX‚Íó‘Ôƒ\}ƒVƒ“‚ğÀŒ»‚·‚éƒNƒ‰ƒX‚Å‚ ‚éB —á: Active\-Object‚Íó‘Ôƒ\}ƒVƒ“‚ğ‚ÂƒAƒNƒeƒBƒuƒIƒuƒWƒFƒNƒg‚Å‚ ‚é‚Æ‚·‚éB ó‘Ô‚Í3ó‘Ô INACTIVE, ACTIVE, ERROR ‚ ‚èAŠeó‘Ô‚Å‚ÌEntry‚âExit“®ì‚ğ ’è‹`‚µ‚½‚¢‚Æ‚·‚é‚ÆAˆÈ‰º‚Ì‚æ‚¤‚ÉÀŒ»‚³‚ê‚éB 

\small\begin{alltt}
	class ActiveObject 
	\{  
	public: 
	  enum MyState \{ INACTIVE, ACTIVE, ERROR \}; 
	  typedef States<MyState> MyStates;\end{alltt}\normalsize 


\small\begin{alltt}	  ActiveObject() 
		: m\_sm(3) 
	  \{ 
		m\_sm.setNOP(&ActiveObject::nullAction); 
		m\_sm.setListener(this);\end{alltt}\normalsize 


\small\begin{alltt}		m\_sm.setExitAction(NACTIVE, &ActiveObject::inactiveExit); 
		  : 
		m\_sm.setPostDoAction(ERROR, &ActiveObject::errorPostDo); 
		m\_sm.setTransitionAction(&ActiveObject:tratransitionnsition); 
	  \};\end{alltt}\normalsize 


\small\begin{alltt}	  bool nullAction(MyStates st) \{\}; 
	  bool inactiveExit(MyStates st) \{\}; 
		: 
	  bool errorPostDo(MyStates st) \{\}; 
	  bool transition(MyStates st) \{\};\end{alltt}\normalsize 


\small\begin{alltt}	private: 
	  StateMachine<MyState, bool, ActiveObject> m\_sm; 
	\}; 
	\end{alltt}\normalsize 
 ó‘Ô‚ğ‚½‚¹‚½‚¢ƒNƒ‰ƒX‚ÍˆÈ‰º‚ÌğŒ‚ğ–‚½‚·‚æ‚¤‚ÉÀ‘•‚µ‚È‚¯‚ê‚Î‚È‚ç‚È‚¢B \begin{enumerate}
\item enum ‚Åó‘Ô‚ğ’è‹` \item State\-Machine ‚Ìƒeƒ“ƒvƒŒ[ƒgˆø”‚ÍA\par
 $<$ó‘Ô‚ÌŒ^(My\-State), ƒAƒNƒVƒ‡ƒ“ŠÖ”‚Ì–ß‚è’l(bool), “–ŠYƒIƒuƒWƒFƒNƒg‚ÌŒ^$>$ \item State\-Machine ‚ÌƒRƒ“ƒXƒgƒ‰ƒNƒ^ˆø”‚Íó‘Ô‚Ì” \item ˆÈ‰º‚ÌƒAƒNƒVƒ‡ƒ“ŠÖ”‚ğ(Return \_\-function\_\-name\_\-(States)) ‚ÌŠÖ”‚Æ‚µ‚Äİ’è \begin{enumerate}
\item ‰½‚à‚µ‚È‚¢ŠÖ”‚ğ•K‚¸’è‹`‚µAset\-NOP ‚Å—^‚¦‚È‚¯‚ê‚Î‚È‚ç‚È‚¢ \item Šeó‘Ô–ˆ‚É, set(Entry$|$Pre\-Do$|$Do$|$Post\-Do$|$Exit)Action ‚ÅƒAƒNƒVƒ‡ƒ“‚ğİ’è \item ó‘Ô‘JˆÚ‚ÌƒAƒNƒVƒ‡ƒ“‚ğ {\bf set\-Transition\-Action()}{\rm (p.\,\pageref{classStateMachine_StateMachinea8})} ‚Åİ’èB \end{enumerate}
\item ‘JˆÚ‚ÌƒAƒNƒVƒ‡ƒ“‚ÍA—^‚¦‚ç‚ê‚½Œ»İó‘ÔAŸó‘ÔA‘Oó‘Ô‚ğŒ³‚ÉA ƒ†[ƒU‚ªÀ‘•‚µ‚È‚¯‚ê‚Î‚È‚ç‚È‚¢B \item ó‘Ô‚Ì•ÏX‚Í {\bf go\-To()}{\rm (p.\,\pageref{classStateMachine_StateMachinea13})} ‚ÅAó‘Ô‚Ìƒ`ƒFƒbƒN‚Í {\bf is\-In(state)}{\rm (p.\,\pageref{classStateMachine_StateMachinea12})} ‚Ås‚¤B \item {\bf go\-To()}{\rm (p.\,\pageref{classStateMachine_StateMachinea13})}‚ÍŸó‘Ô‚ğ‹­§“I‚ÉƒZƒbƒg‚·‚éŠÖ”‚Å‚ ‚èA‘JˆÚ‚Ì‰Â”Û‚ÍA ƒ†[ƒU‚ªŒ»İó‘Ô‚ğæ“¾‚µ”»’f‚·‚éƒƒWƒbƒN‚ğÀ‘•‚µ‚È‚¯‚ê‚Î‚È‚ç‚È‚¢B \end{enumerate}


‚±‚ÌƒNƒ‰ƒX‚ÍAˆê‚Â‚Ìó‘Ô‚É‘Î‚µ‚ÄA \begin{itemize}
\item Entry action \item Pre\-Do action \item Do action2 \item Post\-Do action \item Exit action \end{itemize}
5‚Â‚ÌƒAƒNƒVƒ‡ƒ“‚ª’è‹`‚·‚é‚±‚Æ‚ª‚Å‚«‚éB Transition action ‚Í‚ ‚ç‚ä‚éó‘ÔŠÔ‘JˆÚ‚ÅŒÄ‚Ño‚³‚ê‚éƒAƒNƒVƒ‡ƒ“‚ÅA ‚»‚ÌU‚é•‘‚¢‚Íƒ†[ƒU‚ª’è‹`‚µ‚È‚¯‚ê‚Î‚È‚ç‚È‚¢B

‚±‚ÌƒNƒ‰ƒX‚ÍˆÈ‰º‚Ì‚æ‚¤‚Èƒ^ƒCƒ~ƒ“ƒO‚ÅŠeƒAƒNƒVƒ‡ƒ“‚ªÀs‚³‚ê‚éB

\begin{itemize}
\item ó‘Ô‚ª•ÏX‚³‚ê(A-$>$B)ó‘Ô‚ª‘JˆÚ‚·‚éê‡ \par
 (A:Exit)-$>$$|$(ó‘ÔXV:A-$>$B)-$>$(B:Entry)-$>$(B:Pre\-Do)-$>$(B:Do)-$>$(B:Post\-Do)

\item ó‘Ô‚ª•ÏX‚³‚ê‚¸ABó‘Ô‚ğˆÛ‚·‚éê‡ ($|$‚ÍƒXƒeƒbƒv‚Ì‹æØ‚è‚ğ•$\backslash$‚·)\par
 (B(n-1):Post\-Do)-$>$$|$(B(n):Pre\-Do)-$>$(B(n):Do)-$>$(B(n):Post\-Do)-$>$$|$(B(n+1):Pre\-Do)\par
 Pre\-Do, Do, Post\-Do ‚ªŒJ‚è•Ô‚µÀs‚³‚ê‚éB

\item ©ŒÈ‘JˆÚ‚·‚éê‡ \par
 (B(n-1):Post\-Do)-$>$(B(n-1):Exit)-$>$$|$(B(n):Entry)-$>$(B(n):Pre\-Do) \par
 ˆê’U Exit ‚ªŒÄ‚Î‚ê‚½ŒãAEntry ‚ªÀs‚³‚êAˆÈ~‚Í‘O€‚Æ“¯‚¶“®ì‚ğ‚·‚éB \end{itemize}
2



\subsection{ŠÖ”}
\index{StateMachine@{State\-Machine}!__init__@{\_\-\_\-init\_\-\_\-}}
\index{__init__@{\_\-\_\-init\_\-\_\-}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::\_\-\_\-init\_\-\_\- (num\_\-of\_\-state)}\label{classStateMachine_StateMachinea0}


ƒRƒ“ƒXƒgƒ‰ƒNƒ^ 

\index{StateMachine@{State\-Machine}!getState@{getState}}
\index{getState@{getState}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::get\-State ()}\label{classStateMachine_StateMachinea11}


\index{StateMachine@{State\-Machine}!getStates@{getStates}}
\index{getStates@{getStates}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::get\-States ()}\label{classStateMachine_StateMachinea10}


ó‘Ô‚ğæ“¾‚·‚é 

\index{StateMachine@{State\-Machine}!goTo@{goTo}}
\index{goTo@{goTo}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::go\-To (state)}\label{classStateMachine_StateMachinea13}


ó‘Ô‚ğ•ÏX 

\index{StateMachine@{State\-Machine}!isIn@{isIn}}
\index{isIn@{isIn}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::is\-In (state)}\label{classStateMachine_StateMachinea12}


Œ»İó‘Ô‚ğŠm”F 

\index{StateMachine@{State\-Machine}!need_trans@{need\_\-trans}}
\index{need_trans@{need\_\-trans}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::need\_\-trans ()}\label{classStateMachine_StateMachinea17}


\index{StateMachine@{State\-Machine}!setDoAction@{setDoAction}}
\index{setDoAction@{setDoAction}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-Do\-Action (state, call\_\-back)}\label{classStateMachine_StateMachinea5}


Do action ŠÖ”‚ğ“o˜^‚·‚é. 

\index{StateMachine@{State\-Machine}!setEntryAction@{setEntryAction}}
\index{setEntryAction@{setEntryAction}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-Entry\-Action (state, call\_\-back)}\label{classStateMachine_StateMachinea3}


Entry action ŠÖ”‚ğ“o˜^‚·‚é. 

\index{StateMachine@{State\-Machine}!setExitAction@{setExitAction}}
\index{setExitAction@{setExitAction}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-Exit\-Action (state, call\_\-back)}\label{classStateMachine_StateMachinea7}


Exit action ŠÖ”‚ğ“o˜^‚·‚é. 

\index{StateMachine@{State\-Machine}!setListener@{setListener}}
\index{setListener@{setListener}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-Listener (listener)}\label{classStateMachine_StateMachinea2}


{\bf Listener}{\rm (p.\,\pageref{namespaceListener})} ƒIƒuƒWƒFƒNƒg‚ğ“o˜^‚·‚é. 

\index{StateMachine@{State\-Machine}!setNOP@{setNOP}}
\index{setNOP@{setNOP}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-NOP (call\_\-back)}\label{classStateMachine_StateMachinea1}


NOPŠÖ”‚ğ“o˜^‚·‚é. 

\index{StateMachine@{State\-Machine}!setNullFunc@{setNullFunc}}
\index{setNullFunc@{setNullFunc}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-Null\-Func (s, nullfunc)}\label{classStateMachine_StateMachinea15}


\index{StateMachine@{State\-Machine}!setPostDoAction@{setPostDoAction}}
\index{setPostDoAction@{setPostDoAction}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-Post\-Do\-Action (state, call\_\-back)}\label{classStateMachine_StateMachinea6}


Post action ŠÖ”‚ğ“o˜^‚·‚é. 

\index{StateMachine@{State\-Machine}!setPreDoAction@{setPreDoAction}}
\index{setPreDoAction@{setPreDoAction}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-Pre\-Do\-Action (state, call\_\-back)}\label{classStateMachine_StateMachinea4}


Pre\-Do action ŠÖ”‚ğ“o˜^‚·‚é. 

\index{StateMachine@{State\-Machine}!setStartState@{setStartState}}
\index{setStartState@{setStartState}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-Start\-State (states)}\label{classStateMachine_StateMachinea9}


‰Šúó‘Ô‚ğƒZƒbƒg‚·‚é 

\index{StateMachine@{State\-Machine}!setTransitionAction@{setTransitionAction}}
\index{setTransitionAction@{setTransitionAction}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::set\-Transition\-Action (call\_\-back)}\label{classStateMachine_StateMachinea8}


State transition action ŠÖ”‚ğ“o˜^‚·‚é. 

\index{StateMachine@{State\-Machine}!sync@{sync}}
\index{sync@{sync}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::sync (states)}\label{classStateMachine_StateMachinea16}


\index{StateMachine@{State\-Machine}!update_curr@{update\_\-curr}}
\index{update_curr@{update\_\-curr}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::update\_\-curr (curr)}\label{classStateMachine_StateMachinea18}


\index{StateMachine@{State\-Machine}!worker@{worker}}
\index{worker@{worker}!StateMachine@{State\-Machine}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}State\-Machine::worker ()}\label{classStateMachine_StateMachinea14}


‹ì“®ŠÖ” 



‚±‚ÌƒNƒ‰ƒX‚Ìà–¾‚ÍŸ‚Ìƒtƒ@ƒCƒ‹‚©‚ç¶¬‚³‚ê‚Ü‚µ‚½:\begin{CompactItemize}
\item 
{\bf State\-Machine.py}\end{CompactItemize}
